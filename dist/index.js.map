{"version":3,"sources":["../webpack:/setup-ninja/lib/main.js","../webpack:/setup-ninja/lib/util.js","../webpack:/setup-ninja/webpack/bootstrap","../webpack:/setup-ninja/webpack/startup"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","apply","__importDefault","default","exports","core","__webpack_require__","io","util","fs_1","jszip_1","path_1","run","ninjaVersion","getInput","required","ninjaDest","ninjaPlatform","getPlatform","Error","ninjaDwdUrl","ninjaBinaryName","IS_WIN","mkdirP","ninjaFilepath","join","buff","downloadAsBuffer","ninjaZip","loadAsync","ninjaBinary","files","async","content","writeFileSync","chmodSync","info","addPath","error","setFailed","message","IS_MAC","IS_LINUX","request_1","process","platform","url","console","log","encoding","err","res","body","statusCode","includes","__webpack_module_cache__","moduleId","cachedModule","module","threw","__webpack_modules__","__webpack_exports__"],"mappings":"+CACA,IAAAA,EAAAC,MAAAA,KAAAD,kBAAAE,OAAAC,OAAA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,GAAAA,IAAAC,UAAAD,EAAAD,EACAJ,OAAAO,eAAAL,EAAAG,EAAA,CAAAG,WAAA,KAAAC,IAAA,WAAA,OAAAN,EAAAC,OACA,SAAAF,EAAAC,EAAAC,EAAAC,GACA,GAAAA,IAAAC,UAAAD,EAAAD,EACAF,EAAAG,GAAAF,EAAAC,KAEA,IAAAM,EAAAX,MAAAA,KAAAW,qBAAAV,OAAAC,OAAA,SAAAC,EAAAS,GACAX,OAAAO,eAAAL,EAAA,UAAA,CAAAM,WAAA,KAAAI,MAAAD,KACA,SAAAT,EAAAS,GACAT,EAAA,WAAAS,IAEA,IAAAE,EAAAd,MAAAA,KAAAc,cAAA,SAAAC,GACA,GAAAA,GAAAA,EAAAC,WAAA,OAAAD,EACA,IAAAE,EAAA,GACA,GAAAF,GAAA,KAAA,IAAA,IAAAV,KAAAU,EAAA,GAAAV,IAAA,WAAAJ,OAAAiB,UAAAC,eAAAC,KAAAL,EAAAV,GAAAN,EAAAkB,EAAAF,EAAAV,GACAM,EAAAM,EAAAF,GACA,OAAAE,GAEA,IAAAI,EAAArB,MAAAA,KAAAqB,WAAA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,SAAAC,MAAAb,GAAA,OAAAA,aAAAW,EAAAX,EAAA,IAAAW,GAAA,SAAAG,GAAAA,EAAAd,MACA,OAAA,IAAAW,IAAAA,EAAAI,WAAA,SAAAD,EAAAE,GACA,SAAAC,UAAAjB,GAAA,IAAAkB,KAAAN,EAAAO,KAAAnB,IAAA,MAAAoB,GAAAJ,EAAAI,IACA,SAAAC,SAAArB,GAAA,IAAAkB,KAAAN,EAAA,SAAAZ,IAAA,MAAAoB,GAAAJ,EAAAI,IACA,SAAAF,KAAAd,GAAAA,EAAAkB,KAAAR,EAAAV,EAAAJ,OAAAa,MAAAT,EAAAJ,OAAAuB,KAAAN,UAAAI,UACAH,MAAAN,EAAAA,EAAAY,MAAAf,EAAAC,GAAA,KAAAS,YAGA,IAAAM,EAAAtC,MAAAA,KAAAsC,iBAAA,SAAAvB,GACA,OAAAA,GAAAA,EAAAC,WAAAD,EAAA,CAAAwB,QAAAxB,IAEAd,OAAAO,eAAAgC,EAAA,aAAA,CAAA3B,MAAA,OAuBA,MAAA4B,EAAA3B,EAAA4B,EAAA,OACA,MAAAC,EAAA7B,EAAA4B,EAAA,MACA,MAAAE,EAAA9B,EAAA4B,EAAA,OACA,MAAAG,EAAAP,EAAAI,EAAA,OACA,MAAAI,EAAAR,EAAAI,EAAA,MACA,MAAAK,EAAAT,EAAAI,EAAA,OACA,SAAAM,MACA,OAAA3B,EAAArB,UAAA,OAAA,GAAA,YACA,IACA,MAAAiD,EAAAR,EAAAS,SAAA,UAAA,CAAAC,SAAA,QACA,MAAAC,EAAAX,EAAAS,SAAA,QACA,MAAAG,EAAAT,EAAAU,YAAAb,EAAAS,SAAA,aACA,IAAAG,EACA,MAAAE,MAAA,wBACA,MAAAC,EAAA,2DAAAP,WAAAI,QACA,IAAAI,EAAA,QACA,GAAAb,EAAAc,OAAA,CACAD,EAAA,GAAAA,cAGAd,EAAAgB,OAAAP,GACA,MAAAQ,EAAAb,EAAAR,QAAAsB,KAAAT,EAAAK,GACA,MAAAK,QAAAlB,EAAAmB,iBAAAP,GACA,MAAAQ,QAAAlB,EAAAP,QAAA0B,UAAAH,GACA,MAAAI,EAAAF,EAAAG,MAAAV,GACA,GAAAS,EAAA,OACAA,EAAAE,MAAA,cAAAhC,MAAAiC,IACAxB,EAAAN,QAAA+B,cAAAV,EAAAS,UAGA,CACA,MAAAd,MAAA,oBAAAE,6BAGAZ,EAAAN,QAAAgC,UAAAX,EAAA,OACAnB,EAAA+B,KAAA,gCAAAvB,QAAAG,KAEAX,EAAAgC,QAAArB,GACAX,EAAA+B,KAAA,4BAAAvB,aAEA,MAAAyB,GACAjC,EAAAkC,UAAAD,EAAAE,aAIA5B,yCCnGA,IAAA3B,EAAArB,MAAAA,KAAAqB,WAAA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,SAAAC,MAAAb,GAAA,OAAAA,aAAAW,EAAAX,EAAA,IAAAW,GAAA,SAAAG,GAAAA,EAAAd,MACA,OAAA,IAAAW,IAAAA,EAAAI,WAAA,SAAAD,EAAAE,GACA,SAAAC,UAAAjB,GAAA,IAAAkB,KAAAN,EAAAO,KAAAnB,IAAA,MAAAoB,GAAAJ,EAAAI,IACA,SAAAC,SAAArB,GAAA,IAAAkB,KAAAN,EAAA,SAAAZ,IAAA,MAAAoB,GAAAJ,EAAAI,IACA,SAAAF,KAAAd,GAAAA,EAAAkB,KAAAR,EAAAV,EAAAJ,OAAAa,MAAAT,EAAAJ,OAAAuB,KAAAN,UAAAI,UACAH,MAAAN,EAAAA,EAAAY,MAAAf,EAAAC,GAAA,KAAAS,YAGA,IAAAM,EAAAtC,MAAAA,KAAAsC,iBAAA,SAAAvB,GACA,OAAAA,GAAAA,EAAAC,WAAAD,EAAA,CAAAwB,QAAAxB,IAEAd,OAAAO,eAAAgC,EAAA,aAAA,CAAA3B,MAAA,OACA2B,EAAAc,YAAAd,EAAAuB,iBAAAvB,EAAAqC,OAAArC,EAAAsC,SAAAtC,EAAAkB,YAAA,EAwBA,MAAAqB,EAAAzC,EAAAI,EAAA,OACAF,EAAAkB,OAAAsB,QAAAC,WAAA,QACAzC,EAAAsC,SAAAE,QAAAC,WAAA,QACAzC,EAAAqC,OAAAG,QAAAC,WAAA,SACA,SAAAlB,iBAAAmB,GACA,OAAA7D,EAAArB,UAAA,OAAA,GAAA,YACA,OAAA,IAAA4B,SAAA,CAAAD,EAAAE,KACAsD,QAAAC,IAAA,oBAAAF,KACAH,EAAAxC,QAAA7B,IAAA,CAAAwE,IAAAA,EAAAG,SAAA,OAAA,CAAAC,EAAAC,EAAAC,KACA,GAAAF,EAAA,CACAzD,EAAAyD,GAEAH,QAAAC,IAAA,YAAAG,EAAAE,cACA,GAAAF,EAAAE,YAAA,IAAA,CACA5D,EAAA0B,MAAA,YAAAgC,EAAAE,mBAAAP,UAEA,CACAC,QAAAC,IAAA,sBACAzD,EAAA6D,aAMAhD,EAAAuB,iBAAAA,iBACA,SAAAT,YAAA2B,GACA,IAAAA,EAAA,CACA,OAAAzC,EAAAqC,OAAA,MAAArC,EAAAsC,SAAA,QAAAtC,EAAAkB,OAAA,MAAA,OAEA,CACA,MAAA,CAAA,MAAA,QAAA,OAAAgC,SAAAT,GAAAA,EAAA,IAGAzC,EAAAc,YAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;61ySCtEA,IAAAqC,EAAA,GAGA,SAAAjD,oBAAAkD,GAEA,IAAAC,EAAAF,EAAAC,GACA,GAAAC,IAAAtF,UAAA,CACA,OAAAsF,EAAArD,QAGA,IAAAsD,EAAAH,EAAAC,GAAA,CAGApD,QAAA,IAIA,IAAAuD,EAAA,KACA,IACAC,EAAAJ,GAAAxE,KAAA0E,EAAAtD,QAAAsD,EAAAA,EAAAtD,QAAAE,qBACAqD,EAAA,MACA,QACA,GAAAA,SAAAJ,EAAAC,GAIA,OAAAE,EAAAtD,yFCxBA,IAAAyD,EAAAvD,oBAAA","file":"index.js","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/*\r\n * MIT License\r\n *\r\n * Copyright (c) 2020 Ashutosh Varma\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\r\n * this software and associated documentation files (the \"Software\"), to deal in\r\n * the Software without restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\r\n * Software, and to permit persons to whom the Software is furnished to do so,\r\n * subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all\r\n * copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\r\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\r\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\r\n * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH\r\n * THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\nconst core = __importStar(require(\"@actions/core\"));\r\nconst io = __importStar(require(\"@actions/io\"));\r\nconst util = __importStar(require(\"./util\"));\r\nconst fs_1 = __importDefault(require(\"fs\"));\r\nconst jszip_1 = __importDefault(require(\"jszip\"));\r\nconst path_1 = __importDefault(require(\"path\"));\r\nfunction run() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const ninjaVersion = core.getInput('version', { required: false });\r\n            const ninjaDest = core.getInput('dest');\r\n            const ninjaPlatform = util.getPlatform(core.getInput('platform'));\r\n            if (!ninjaPlatform)\r\n                throw Error('Unsupported Platform');\r\n            const ninjaDwdUrl = `https://github.com/ninja-build/ninja/releases/download/v${ninjaVersion}/ninja-${ninjaPlatform}.zip`;\r\n            let ninjaBinaryName = 'ninja';\r\n            if (util.IS_WIN) {\r\n                ninjaBinaryName = `${ninjaBinaryName}.exe`;\r\n            }\r\n            // create folders\r\n            yield io.mkdirP(ninjaDest);\r\n            const ninjaFilepath = path_1.default.join(ninjaDest, ninjaBinaryName);\r\n            const buff = yield util.downloadAsBuffer(ninjaDwdUrl);\r\n            const ninjaZip = yield jszip_1.default.loadAsync(buff);\r\n            const ninjaBinary = ninjaZip.files[ninjaBinaryName];\r\n            if (ninjaBinary) {\r\n                yield ninjaBinary.async('nodebuffer').then(content => {\r\n                    fs_1.default.writeFileSync(ninjaFilepath, content);\r\n                });\r\n            }\r\n            else {\r\n                throw Error(`Could not found \"${ninjaBinaryName}\" in the downloaded file`);\r\n            }\r\n            // make binary executable\r\n            fs_1.default.chmodSync(ninjaFilepath, '755');\r\n            core.info(`Successfully installed ninja-${ninjaVersion} at ${ninjaDest}`);\r\n            // add to path\r\n            core.addPath(ninjaDest);\r\n            core.info(`Successfully added ninja-${ninjaVersion} to PATH`);\r\n        }\r\n        catch (error) {\r\n            core.setFailed(error.message);\r\n        }\r\n    });\r\n}\r\nrun();\r\n//# sourceMappingURL=main.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getPlatform = exports.downloadAsBuffer = exports.IS_MAC = exports.IS_LINUX = exports.IS_WIN = void 0;\r\n/*\r\n * MIT License\r\n *\r\n * Copyright (c) 2020 Ashutosh Varma\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\r\n * this software and associated documentation files (the \"Software\"), to deal in\r\n * the Software without restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\r\n * Software, and to permit persons to whom the Software is furnished to do so,\r\n * subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all\r\n * copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\r\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\r\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\r\n * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH\r\n * THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n/* eslint-disable no-console */\r\nconst request_1 = __importDefault(require(\"request\"));\r\nexports.IS_WIN = process.platform === 'win32';\r\nexports.IS_LINUX = process.platform === 'linux';\r\nexports.IS_MAC = process.platform === 'darwin';\r\nfunction downloadAsBuffer(url) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve, reject) => {\r\n            console.log(`Downloading file ${url}`);\r\n            request_1.default.get({ url, encoding: null }, (err, res, body) => {\r\n                if (err) {\r\n                    reject(err);\r\n                }\r\n                console.log(`Recieved ${res.statusCode}`);\r\n                if (res.statusCode >= 400) {\r\n                    reject(Error(`Recieved ${res.statusCode} from ${url}`));\r\n                }\r\n                else {\r\n                    console.log(`Download Complete.`);\r\n                    resolve(body);\r\n                }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.downloadAsBuffer = downloadAsBuffer;\r\nfunction getPlatform(platform) {\r\n    if (!platform) {\r\n        return exports.IS_MAC ? 'mac' : exports.IS_LINUX ? 'linux' : exports.IS_WIN ? 'win' : '';\r\n    }\r\n    else {\r\n        return ['mac', 'linux', 'win'].includes(platform) ? platform : '';\r\n    }\r\n}\r\nexports.getPlatform = getPlatform;\r\n//# sourceMappingURL=util.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\tvar threw = true;\n\ttry {\n\t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t\tthrew = false;\n\t} finally {\n\t\tif(threw) delete __webpack_module_cache__[moduleId];\n\t}\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3846);\n"]}